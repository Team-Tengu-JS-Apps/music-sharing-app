{"version":3,"sources":["../../../../../public/scripts/controllers/helpers/controller-helpers.js"],"names":["controllerHelpers","MIN_VALUE_VIEWS_LOW","MAX_VALUE_VIEWS_LOW","MIN_VALUE_LIKES_LOW","MAX_VALUE_LIKES_LOW","MIN_VALUE_VIEWS_MEDIUM","MAX_VALUE_VIEWS_MEDIUM","MIN_VALUE_LIKES_MEDIUM","MAX_VALUE_LIKES_MEDIUM","MAX_VALUE_VIEWS_HIGH","MAX_VALUE_LIKES_HIGH","underdogStatus","LOW","MEDIUM","HIGH","parseIdFromYoutubeURL","url","split","pop","evaluateUnderdogStatus","resp","items","Error","stats","statistics","viewCount","likeCount","result","convertSrcToEmbed","id"],"mappings":";;;;;;;;AAAA,IAAMA,oBAAoB,YAAY;AAClC,QAAMC,sBAAsB,MAA5B;AACA,QAAMC,sBAAsB,OAA5B;AACA,QAAMC,sBAAsB,GAA5B;AACA,QAAMC,sBAAsB,IAA5B;AACA,QAAMC,yBAAyB,MAA/B;AACA,QAAMC,yBAAyBL,mBAA/B;AACA,QAAMM,yBAAyB,GAA/B;AACA,QAAMC,yBAAyBL,mBAA/B;AACA,QAAMM,uBAAuBJ,sBAA7B;AACA,QAAMK,uBAAuBH,sBAA7B;;AAEA,QAAMI,iBAAiB;AACnBC,aAAK,CADc;AAEnBC,gBAAQ,CAFW;AAGnBC,cAAM;AAHa,KAAvB;;AAMA,aAASC,qBAAT,CAA+BC,GAA/B,EAAoC;AAChCA,cAAMA,OAAO,EAAb;AACA,eAAOA,IAAIC,KAAJ,CAAU,IAAV,EAAgBC,GAAhB,EAAP;AACH;;AAED,aAASC,sBAAT,CAAgCC,IAAhC,EAAsC;AAClC,YAAI,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,CAACA,KAAKC,KAAtC,EAA4C;AACxC,kBAAMC,MAAM,wCAAN,CAAN;AACH;;AAED,YAAMC,QAAQH,KAAKC,KAAL,CAAW,CAAX,EAAcG,UAA5B;AACA,YAAMC,YAAY,CAACF,MAAME,SAAzB;AACA,YAAMC,YAAY,CAACH,MAAMG,SAAzB;;AAEA,YAAMC,SAAS,EAAf;AACA,YAAKF,YAAYxB,mBAAZ,IAAmCwB,YAAYvB,mBAAhD,IACCwB,YAAYvB,mBAAZ,IAAmCuB,YAAYtB,mBADpD,EAC0E;AACtEuB,mBAAOhB,cAAP,GAAwBA,eAAeC,GAAvC;AACH;;AAED,YAAKa,YAAYpB,sBAAZ,IAAsCoB,aAAanB,sBAApD,IACCoB,YAAYnB,sBAAZ,IAAsCmB,aAAalB,sBADxD,EACiF;AAC7EmB,mBAAOhB,cAAP,GAAwBA,eAAeE,MAAvC;AACH;;AAED,YAAIY,aAAahB,oBAAb,IAAqCiB,aAAahB,oBAAtD,EAA4E;AACxEiB,mBAAOhB,cAAP,GAAwBA,eAAeG,IAAvC;AACH;;AAED,eAAOa,MAAP;AACH;;AAED,aAASC,iBAAT,CAA2BZ,GAA3B,EAAgC;AAC5B,YAAMa,KAAKd,sBAAsBC,GAAtB,CAAX;AACA,4CAAkCa,EAAlC;AACH;;AAED,WAAO;AACHd,oDADG;AAEHI,sDAFG;AAGHS;AAHG,KAAP;AAKH,CA5DyB,EAA1B;;QA8DQ5B,iB,GAAAA,iB","file":"controller-helpers.js","sourcesContent":["const controllerHelpers = function () {\r\n    const MIN_VALUE_VIEWS_LOW = 500000;\r\n    const MAX_VALUE_VIEWS_LOW = 1000000;\r\n    const MIN_VALUE_LIKES_LOW = 500;\r\n    const MAX_VALUE_LIKES_LOW = 1000;\r\n    const MIN_VALUE_VIEWS_MEDIUM = 100000;\r\n    const MAX_VALUE_VIEWS_MEDIUM = MIN_VALUE_VIEWS_LOW;\r\n    const MIN_VALUE_LIKES_MEDIUM = 100;\r\n    const MAX_VALUE_LIKES_MEDIUM = MIN_VALUE_LIKES_LOW;\r\n    const MAX_VALUE_VIEWS_HIGH = MIN_VALUE_VIEWS_MEDIUM;\r\n    const MAX_VALUE_LIKES_HIGH = MIN_VALUE_LIKES_MEDIUM;\r\n\r\n    const underdogStatus = {\r\n        LOW: 1,\r\n        MEDIUM: 2,\r\n        HIGH: 3\r\n    };\r\n\r\n    function parseIdFromYoutubeURL(url) {\r\n        url = url || '';\r\n        return url.split('v=').pop();\r\n    }\r\n\r\n    function evaluateUnderdogStatus(resp) {\r\n        if (typeof resp !== 'object' || !resp.items){\r\n            throw Error('Failed to evaluate the Underdog status');\r\n        }\r\n\r\n        const stats = resp.items[0].statistics;\r\n        const viewCount = +stats.viewCount;\r\n        const likeCount = +stats.likeCount;\r\n\r\n        const result = {};\r\n        if ((viewCount > MIN_VALUE_VIEWS_LOW && viewCount < MAX_VALUE_VIEWS_LOW) ||\r\n            (likeCount > MIN_VALUE_LIKES_LOW && likeCount < MAX_VALUE_LIKES_LOW)) {\r\n            result.underdogStatus = underdogStatus.LOW;\r\n        }\r\n\r\n        if ((viewCount > MIN_VALUE_VIEWS_MEDIUM && viewCount <= MAX_VALUE_VIEWS_MEDIUM) ||\r\n            (likeCount > MIN_VALUE_LIKES_MEDIUM && likeCount <= MAX_VALUE_LIKES_MEDIUM)) {\r\n            result.underdogStatus = underdogStatus.MEDIUM;\r\n        }\r\n\r\n        if (viewCount <= MAX_VALUE_VIEWS_HIGH || likeCount <= MAX_VALUE_LIKES_HIGH) {\r\n            result.underdogStatus = underdogStatus.HIGH;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    function convertSrcToEmbed(url) {\r\n        const id = parseIdFromYoutubeURL(url);\r\n        return `//www.youtube.com/embed/${id}`;\r\n    }\r\n\r\n    return {\r\n        parseIdFromYoutubeURL,\r\n        evaluateUnderdogStatus,\r\n        convertSrcToEmbed\r\n    };\r\n}();\r\n\r\nexport {controllerHelpers};"]}