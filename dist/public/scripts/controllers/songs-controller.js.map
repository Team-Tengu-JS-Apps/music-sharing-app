{"version":3,"sources":["../../../../public/scripts/controllers/songs-controller.js"],"names":["songsController","ERROR_MESSAGE","get","context","result","songs","then","resp","all","template","$element","html","catch","err","toastr","error","responseJSON","reduce","arr","x","concat","_","shuffle","add","Promise","resolve","$","bootstrapValidator","live","trigger","on","event","data","isValid","warning","redirect","byId","url","window","location","href","id","substring","lastIndexOf","tests","JSON","stringify","del","urlParts","split","length","comments","aside","closest","find","dropdown","carousel","$target","target","currentTarget","is","stars","rate","success","comment","$commentBox","text","val","loadTop","getTop","count","embed","$embedContainer","addClass","reject","setTimeout","removeClass","top","tops"],"mappings":"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","file":"songs-controller.js","sourcesContent":["import {controllerHelpers} from 'controller-helpers';\r\nimport {dataService} from 'data';\r\nimport {templateLoader} from 'templates';\r\n\r\nconst songsController = (function () {\r\n    const ERROR_MESSAGE = 'Oops! Something went wrong.';\r\n\r\n    function get(context) {\r\n        let result = {};\r\n        dataService.songs.get()\r\n            .then(function (resp) {\r\n                result.all = resp;\r\n                return templateLoader.get('songs-user');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function all(context) {\r\n        let result = {};\r\n        dataService.songs.all()\r\n            .then(function (resp) {\r\n                let songs = resp.reduce((arr, x) => x.concat(arr), []);\r\n                songs = _.shuffle(songs);\r\n                result.all = songs;\r\n                return templateLoader.get('songs');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function add(context) {\r\n        templateLoader.get('song-add')\r\n            .then(function (template) {\r\n                context.$element()\r\n                    .html(template());\r\n                return Promise.resolve();\r\n            })\r\n            .then(function () {\r\n                $('#add-song-form')\r\n                    .bootstrapValidator({\r\n                        live: 'enabled',\r\n                        trigger: null\r\n                    });\r\n                $('#btn-song-add').on('click', function (event) {\r\n                    const bootstrapValidator = $(\"#add-song-form\").data('bootstrapValidator');\r\n\r\n                    if (!bootstrapValidator.isValid()) {\r\n                        toastr.warning(`Unable to send form data!`);\r\n                        return;\r\n                    }\r\n\r\n                    context.redirect('#/songs/add/query');\r\n                });\r\n\r\n\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function byId(context) {\r\n        let result = {};\r\n        const url = window.location.href;\r\n        const id = url.substring(url.lastIndexOf('/') + 1);\r\n        dataService.tests.get(id)\r\n            .then(function (resp) {\r\n                result.all = JSON.stringify(resp);\r\n                return templateLoader.get('tests');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function del(context) {\r\n        let result = {};\r\n        const url = window.location.href;\r\n        const urlParts = url.split('/');\r\n        const id = urlParts[urlParts.length - 2];\r\n        dataService.tests.del(id)\r\n            .then(function (resp) {\r\n                result.all = JSON.stringify(resp);\r\n                return templateLoader.get('tests');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function comments(context) {\r\n        let result = {};\r\n        const url = window.location.href;\r\n        const urlParts = url.split('/');\r\n        const id = urlParts[urlParts.length - 2];\r\n\r\n        dataService.songs.comments(id)\r\n            .then(function (resp) {\r\n                if (resp.length === 0) {\r\n                    resp = resp.concat(['Be the first to leave a comment', 'Sorry, no comment', 'First fake comment']);\r\n                }\r\n                result.id = id;\r\n                result.all = resp;\r\n                return templateLoader.get('songs-aside');\r\n            })\r\n            .then(function (template) {\r\n                const aside = context.$element()\r\n                    .closest('.container')\r\n                    .find('#right');\r\n                aside.html(template(result));\r\n            })\r\n            .then(function () {\r\n                $(\".dropdown-toggle\").dropdown();\r\n                $('.carousel').carousel();\r\n                $('.dropdown-menu').on('click', 'a', function (event) {\r\n                    const $target = $(event.target);\r\n                    $('.stars-to-award').html($target.html());\r\n                });\r\n                $('#rate-song').on('click', function (event) {\r\n                    if ($(event.currentTarget).is(':checked')) {\r\n                        const stars = $('.stars-to-award').html();\r\n                        dataService.songs.rate(id, +stars)\r\n                            .then(function (template) {\r\n                                toastr.success(`${stars} stars awarded to song`);\r\n                            })\r\n                            .catch(function (err) {\r\n                                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n                            });\r\n                    }\r\n                });\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function comment(context) {\r\n        const url = window.location.href;\r\n        const urlParts = url.split('/');\r\n        const id = urlParts[urlParts.length - 2];\r\n\r\n        const $commentBox = $('.tb-comment');\r\n        if (!$commentBox.length) {\r\n            toastr.error(\"Unable to add a comment\");\r\n            return;\r\n        }\r\n\r\n        const comment = $('<div/>').text($commentBox.val()).html();\r\n\r\n        dataService.songs.comment(id, comment)\r\n            .then(function (resp) {\r\n                toastr.success(\"Comment added successfully!\");\r\n                context.redirect(`#/songs/${id}/comments`);\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function rate(context) {\r\n        let result = {};\r\n        const url = window.location.href;\r\n        const urlParts = url.split('/');\r\n        const id = urlParts[urlParts.length - 2];\r\n        dataService.tests.rate(id, 1)\r\n            .then(function (resp) {\r\n                result.all = JSON.stringify(resp);\r\n                return templateLoader.get('tests');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function loadTop(context) {\r\n        let result = {};\r\n        templateLoader.get('songs-tops')\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function getTop(context) {\r\n        let result = {};\r\n        const url = window.location.href;\r\n        const count = url.substring(url.lastIndexOf('/') + 1);\r\n        dataService.songs.getTop(count)\r\n            .then(function (resp) {\r\n                let songs = resp;\r\n                result.all = songs;\r\n                return templateLoader.get('songs');\r\n            })\r\n            .then(function (template) {\r\n                context.$element().html(template(result));\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error(err.responseJSON || ERROR_MESSAGE);\r\n            });\r\n    }\r\n\r\n    function embed(url) {\r\n        const $embedContainer = $('.embed-container');\r\n        templateLoader.get('songs-embed')\r\n            .then(function (template) {\r\n                $embedContainer.addClass('loader');\r\n                $embedContainer.html(template({url: url}));\r\n\r\n                return new Promise(function (resolve, reject) {\r\n                    setTimeout(function () {\r\n                        resolve();\r\n                    }, 1000);\r\n                });\r\n            })\r\n            .then(function () {\r\n                $embedContainer.removeClass('loader');\r\n            })\r\n            .catch(function (err) {\r\n                toastr.error('Unable to embed video');\r\n            });\r\n    }\r\n\r\n    return {\r\n        get: get,\r\n        all: all,\r\n        add: add,\r\n        byId: byId,\r\n        del: del,\r\n        comments: comments,\r\n        comment: comment,\r\n        rate: rate,\r\n        top: getTop,\r\n        tops: loadTop,\r\n        embed: embed\r\n    };\r\n}());\r\n\r\nexport {songsController};\r\n"]}