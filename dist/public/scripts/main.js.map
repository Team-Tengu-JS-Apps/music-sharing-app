{"version":3,"sources":["../../../public/scripts/main.js"],"names":["sammyApp","Sammy","get","all","register","add","byId","del","comments","comment","tops","top","query","$","run","users","hasUser","removeClass","html","localStorage","getItem","on","e","preventDefault","signOut","signIn","event","$target","waitToScroll","time","Promise","resolve","reject","animate","scrollTop","then","urlOfSong","data","urlToEmbed","convertSrcToEmbed","embed","$carousel","length","carousel"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEC,aAAY;;AAET,QAAMA,WAAWC,MAAM,UAAN,EAAkB,YAAY;;AAE3C,aAAKC,GAAL,CAAS,IAAT,EAAe,+BAAeC,GAA9B;;AAEA,aAAKD,GAAL,CAAS,SAAT,EAAoB,iCAAgBC,GAApC;AACA,aAAKD,GAAL,CAAS,kBAAT,EAA6B,iCAAgBE,QAA7C;;AAEA,aAAKF,GAAL,CAAS,SAAT,EAAoB,iCAAgBA,GAApC;AACA,aAAKA,GAAL,CAAS,aAAT,EAAwB,iCAAgBC,GAAxC;AACA,aAAKD,GAAL,CAAS,aAAT,EAAwB,iCAAgBG,GAAxC;AACA,aAAKH,GAAL,CAAS,aAAT,EAAwB,iCAAgBI,IAAxC;AACA,aAAKJ,GAAL,CAAS,iBAAT,EAA4B,iCAAgBK,GAA5C;AACA,aAAKL,GAAL,CAAS,sBAAT,EAAiC,iCAAgBM,QAAjD;AACA,aAAKN,GAAL,CAAS,qBAAT,EAAgC,iCAAgBO,OAAhD;AACA,aAAKP,GAAL,CAAS,cAAT,EAAyB,iCAAgBQ,IAAzC;AACA,aAAKR,GAAL,CAAS,oBAAT,EAA+B,iCAAgBS,GAA/C;;AAEA,aAAKT,GAAL,CAAS,mBAAT,EAA8B,qCAAkBU,KAAhD;AAEH,KAnBgB,CAAjB;;AAqBAC,MAAE,YAAY;AACVb,iBAASc,GAAT,CAAa,IAAb;;AAEA,YAAI,kBAAYC,KAAZ,CAAkBC,OAAlB,EAAJ,EAAiC;AAC7BH,cAAE,qBAAF,EAAyBI,WAAzB,CAAqC,QAArC;AACAJ,cAAE,WAAF,EAAeI,WAAf,CAA2B,QAA3B;AACAJ,cAAE,iBAAF,EAAqBK,IAArB,CAA0BC,aAAaC,OAAb,CAAqB,yBAArB,CAA1B;AACAP,cAAE,eAAF,EAAmBQ,EAAnB,CAAsB,OAAtB,EAA+B,UAAUC,CAAV,EAAa;AACxCA,kBAAEC,cAAF;AACA,iDAAgBC,OAAhB;AACH,aAHD;AAIH,SARD,MAQO;AACHX,cAAE,oBAAF,EAAwBI,WAAxB,CAAoC,QAApC;AACAJ,cAAE,cAAF,EAAkBQ,EAAlB,CAAqB,OAArB,EAA8B,UAAUC,CAAV,EAAa;AACvCA,kBAAEC,cAAF;AACA,iDAAgBE,MAAhB;AACH,aAHD;AAIH;;AAEDZ,UAAE,UAAF,EAAcQ,EAAd,CAAiB,OAAjB,EAA0B,aAA1B,EAAyC,UAAUK,KAAV,EAAiB;AACtD,gBAAMC,UAAUd,EAAE,IAAF,CAAhB;;AAEA,gBAAIe,eAAe,SAAfA,YAAe,CAAUC,IAAV,EAAgB;AAC/B,uBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCD,4BAAQlB,EAAE,YAAF,EAAgBoB,OAAhB,CAAwB;AAC5BC,mCAAW;AADiB,qBAAxB,CAAR;AAGH,iBAJM,CAAP;AAKH,aAND;;AAQAN,2BACKO,IADL,CACU,YAAY;AACd,oBAAMC,YAAYT,QAAQU,IAAR,CAAa,KAAb,CAAlB;AACA,oBAAMC,aAAa,qCAAkBC,iBAAlB,CAAoCH,SAApC,CAAnB;AACA,iDAAgBI,KAAhB,CAAsBF,UAAtB;AACH,aALL;AAMH,SAjBD;;AAmBA,YAAMG,YAAY5B,EAAE,WAAF,CAAlB;AACA,YAAI4B,UAAUC,MAAd,EAAsB;AAClBD,sBAAUE,QAAV;AACH;AACJ,KA1CD;AA2CH,CAlEA,GAAD","file":"main.js","sourcesContent":["import {dataService} from 'data';\r\nimport {homeController} from 'home-controller';\r\nimport {usersController} from 'users-controller';\r\nimport {songsController} from 'songs-controller';\r\nimport {youTubeController} from 'youtube-controller';\r\nimport {controllerHelpers} from 'controller-helpers';\r\n\r\n(function () {\r\n\r\n    const sammyApp = Sammy('#content', function () {\r\n\r\n        this.get('#/', homeController.all);\r\n\r\n        this.get('#/users', usersController.all);\r\n        this.get('#/users/register', usersController.register);\r\n\r\n        this.get('#/songs', songsController.get);\r\n        this.get('#/songs/all', songsController.all);\r\n        this.get('#/songs/add', songsController.add);\r\n        this.get('#/songs/:id', songsController.byId);\r\n        this.get('#/songs/:id/del', songsController.del);\r\n        this.get('#/songs/:id/comments', songsController.comments);\r\n        this.get('#/songs/:id/comment', songsController.comment);\r\n        this.get('#/songs/tops', songsController.tops);\r\n        this.get('#/songs/top/:count', songsController.top);\r\n\r\n        this.get('#/songs/add/query', youTubeController.query);\r\n\r\n    });\r\n\r\n    $(function () {\r\n        sammyApp.run('#/');\r\n\r\n        if (dataService.users.hasUser()) {\r\n            $('#container-sign-out').removeClass('hidden');\r\n            $('#main-nav').removeClass('hidden');\r\n            $('#signed-in-user').html(localStorage.getItem('signed-in-user-username'));\r\n            $('#btn-sign-out').on('click', function (e) {\r\n                e.preventDefault();\r\n                usersController.signOut();\r\n            });\r\n        } else {\r\n            $('#container-sign-in').removeClass('hidden');\r\n            $('#btn-sign-in').on('click', function (e) {\r\n                e.preventDefault();\r\n                usersController.signIn();\r\n            });\r\n        }\r\n\r\n        $('#content').on('click', '.watch-song', function (event) {\r\n            const $target = $(this);\r\n\r\n            let waitToScroll = function (time) {\r\n                return new Promise((resolve, reject) => {\r\n                    resolve($('html, body').animate({\r\n                        scrollTop: 0\r\n                    }));\r\n                });\r\n            };\r\n\r\n            waitToScroll()\r\n                .then(function () {\r\n                    const urlOfSong = $target.data(\"url\");\r\n                    const urlToEmbed = controllerHelpers.convertSrcToEmbed(urlOfSong);\r\n                    songsController.embed(urlToEmbed);\r\n                });\r\n        });\r\n\r\n        const $carousel = $('.carousel');\r\n        if ($carousel.length) {\r\n            $carousel.carousel();\r\n        }\r\n    });\r\n}());"]}